<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test Marvel</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.0.js"
        integrity="sha256-DYZMCC8HTC+QDr5QNaIcfR7VSPtcISykd+6eSmBW5qo=" crossorigin="anonymous"></script>
</head>

<body>
    <button class="btn btn-primary" id="submit">Character search </button>

    <script>

        var characters = [
            "Spider-Man", "Thor", "Hulk", "Iron-Man", "Captain-America", "Wolverine", "Thanos", "DeadPool", "Doctor-Strange"
        ]

        $(document).ready(function () {

            // function createCharCard(response){
            //     var charName = response.
            // }
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyBuVunkkdUj9Lh7ghjP2JmLXJLI42K55jQ",
                authDomain: "marveltest-9558a.firebaseapp.com",
                databaseURL: "https://marveltest-9558a.firebaseio.com",
                projectId: "marveltest-9558a",
                storageBucket: "marveltest-9558a.appspot.com",
                messagingSenderId: "557399982087"
            };
            firebase.initializeApp(config);
            database = firebase.database();
            // Marvel Key
            const marvelKey = "3825528115714235769b996819f21ef0";
            // Giphy Key
            // CharID


            $("#submit").on("click", (e) => {
                e.preventDefault();
                // Make call to Marvel for random character
                var charIndex = Math.floor(Math.random() * 100);
                var chartoSearch = characters[charIndex];


                // Marvel Query Built
                var marvelQuery = "https://gateway.marvel.com:443/v1/public/characters?" + chartoSearch +"&limit=2&apikey=" + marvelKey;
                console.log(marvelQuery);

                $.ajax({
                    url: marvelQuery,
                    method: "GET"
                }).then(response => {
                    console.log(response);
                    
                }).catch(err => console.log(err))
            })

        })





// User comes to page. Clicks Battle Button
// Two calls are made to marvel to get random character names
// If the character name is in our firebase...load a character card based on firebase data.
// If the name is not in our firebase... create JSON object to push to firebase based on:
// Name from Marvel, giphy url (make a call with the name from marvel), description of character (from original Marvel call)
// And initialize the battle creds to 0.

// Now we should have two character cards on the screen that are represented in firebase.
// Define on click event listener: when a user clicks a card...they are saying that they believe that character would win 
// in a 1 v 1 fight.  Increment the battle creds of the winner.

    </script>
</body>

</html>